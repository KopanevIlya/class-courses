import{m as v,c as _,w as c,d as e,o,g as n,F as p,p as m,t as r,f as b,i as w,e as k,j as C,q as D,s as F,x as h}from"./app-BWwvm4ZG.js";const A={class:"font-semibold text-xl text-gray-800 leading-tight"},B={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},S={class:"bg-white p-4 rounded shadow"},V={key:0},L=["href"],j={__name:"Chat",props:{chat:Object,messages:Array},setup(i){const f=i,l=h(""),u=h([]);function x(a){u.value=Array.from(a.target.files)}function y(){const a=new FormData;a.append("body",l.value),u.value.forEach(s=>a.append("files[]",s)),F.post(`/chats/${f.chat.id}/messages`,a,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{l.value="",u.value=[]}})}return(a,s)=>{const g=v("AuthenticatedLayout");return o(),_(g,null,{header:c(()=>[e("h2",A," Чат: "+r(i.chat.name),1)]),default:c(()=>[e("div",B,[e("div",M,[e("div",S,[e("ul",null,[(o(!0),n(p,null,m(i.messages,t=>(o(),n("li",{key:t.id},[e("strong",null,r(t.user.name)+":",1),b(" "+r(t.body)+" ",1),t.files&&t.files.length?(o(),n("ul",V,[(o(!0),n(p,null,m(t.files,d=>(o(),n("li",{key:d.id},[e("a",{href:`/storage/${d.path}`,target:"_blank"},r(d.original_name),9,L)]))),128))])):w("",!0)]))),128))]),e("form",{onSubmit:k(y,["prevent"]),enctype:"multipart/form-data"},[C(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),class:"border rounded px-2 py-1 mr-2",placeholder:"Введите сообщение"},null,512),[[D,l.value]]),e("input",{type:"file",multiple:"",onChange:x},null,32),s[1]||(s[1]=e("button",{class:"bg-blue-500 text-white px-3 py-1 rounded",type:"submit"},"Отправить",-1))],32)])])])]),_:1})}}};export{j as default};
